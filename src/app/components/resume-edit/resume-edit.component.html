<main>
  <div class="spinner">
    <mat-spinner *ngIf="isSelected | async; else sForm" mode="indeterminate" color="primary">
    </mat-spinner>
  </div>
  <ng-template #sForm>
    <form [formGroup]="resumeForm">
      <div class="header">
        <img class="header-image" src="https://material.angular.io/assets/img/examples/shiba1.jpg"
             alt="Account avatar">
        <div align="right">
          <div *ngIf="id!==null">
            <button mat-raised-button="" (click)="updateResume()" [disabled]="resumeForm?.invalid">
              Save
            </button>
            <button mat-raised-button="" class="btnControl" (click)="goBack()"> Cancel</button>
          </div>
          <div *ngIf="id===null">
            <button mat-raised-button="" class="btnControl" [disabled]="resumeForm?.invalid" (click)="createResume()"
                    routerLink="/resume/list"> Create
            </button>
            <button mat-raised-button="" class="btnControl" (click)="goBack()"> Cancel</button>
          </div>
        </div>

        <div classng="brief-info">
          <div>
            <a>{{getAccount().firstName}} {{getAccount().lastName}}</a><br>
          </div>
          <div *ngIf="id!==null">
            <h4>{{resumeForm?.get('businessRole').value.businessRoleName}}</h4>
          </div>
          <mat-form-field>
            <mat-select placeholder="Business Role" [formControlName]="'businessRole'">
              <mat-option *ngFor="let role of rolesList" [value]="role">
                {{role.businessRoleName}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <br>
          <div *ngIf="id!==null">
            <br><h5>Skills</h5>
            <mat-chip-list>
              <div *ngFor="let resumeSkill of resumeForm?.get('resumeSkills').value">
                <mat-chip>{{resumeSkill.skillName}}</mat-chip>
              </div>
            </mat-chip-list>
          </div>

          <mat-form-field>
            <mat-select placeholder="Select skill" [compareWith]="compareSkills" [formControlName]="'resumeSkills'" multiple>
              <mat-option *ngFor="let skill of skillsList"  [value]="skill">{{skill.skillName}}</mat-option>
            </mat-select>
          </mat-form-field>


          <div class="about_info">
            <h5>Information</h5>
            <p>
              <mat-form-field>
                <input matInput placeholder="Info" [formControlName]="'info'">
              </mat-form-field>
            </p>
          </div>
          <div class="about">
            <div *ngIf="id!==null">
              <mat-divider></mat-divider>

              <div class="about_edu">
                <br><h5>Education</h5>
                <mat-list *ngFor="let education of getAccount().educations">
                  {{education.completionYear}} <b>{{education.institution}}</b>
                  <mat-divider></mat-divider>
                </mat-list>
              </div>


              <div class="about_work">
                <h5>Work Experience</h5>
                <mat-list *ngFor="let workExp of getAccount().workExperiences">
                  <b>{{workExp.position}}</b><br>
                  {{workExp.workPlace}}<br>

                  {{formatDate(workExp.start)}} -
                  <div *ngIf="workExp.finish; then endDate else presentDay"></div>
                  <ng-template #endDate>{{formatDate(workExp.finish)}}</ng-template>
                  <ng-template #presentDay>настоящее время</ng-template>

                  <mat-divider></mat-divider>
                </mat-list>
              </div>
            </div>
          </div>
        </div>
      </div>

    </form>
  </ng-template>
</main>
